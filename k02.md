スマートデバイスプログラミング 第02回
# Unityで開発してみよう（その１、基礎文法編）
Unity上で簡単なプログラムを組みつつ、C#の基本文法を学びます  
（最終更新：2020-10-11）

## Unityの基本操作について

[公式マニュアル](https://docs.unity3d.com/ja/2020.1/Manual/UsingTheEditor.html)より抜粋

![Unityのインターフェース](https://docs.unity3d.com/ja/2020.1/uploads/Main/Editor-Breakdown.png)

- (A) ツールバー  
中央のプレビューボタン(▶️)をクリックすると、シミュレーションが始まります

- (B) ヒエラルキーウィンドウ  
※GameCanvasを用いた開発では基本的に使用しません

- (C) ゲームビュー  
最終的にレンダリングされたゲームが、シーンカメラを通してどのように見えるかをシミュレートします

- (D) シーンビュー  
※GameCanvasを用いた開発では基本的に使用しません

- (E) インスペクターウィンドウ  
※GameCanvasを用いた開発では基本的に使用しません

- (F) プロジェクトウィンドウ  
プロジェクトで使用可能なアセット（ファイル）が表示されます

- (G) ステータスバー  
Unityの様々なプロセスに関する通知が表示されます  
通知をクリックすると、[コンソールウィンドウ](https://docs.unity3d.com/ja/2020.1/Manual/Console.html)が表示されます

Unityのインターフェースレイアウトは[自由に変更できます](https://docs.unity3d.com/ja/2020.1/Manual/CustomizingYourWorkspace.html)

## C# の基本文法について
- [C# の基本文法について](http://web.sfc.keio.ac.jp/~wadari/sdp/k02_cs.html)


この講義では、C#の詳細や高度な文法については説明しません  
各自、外部の専門サイト等を活用してみてください

- [C# によるプログラミング入門（外部サイト）](https://ufcpp.net/study/csharp/)
- [Unity での C# コードのデバッグ（外部サイト）](https://docs.unity3d.com/ja/2020.1/Manual/ManagedCodeDebugging.html)

## GameCanvasについて

「スマートデバイス向けのアプリを、簡単なコードを記述するだけで、お手軽につくれる」フレームワークです

開発者は `Assets/Game.cs` スクリプトに、行いたい処理を書き加えていきます  
画像や音声を扱いたい場合は `Assets/Res` フォルダに置いて、スクリプトから呼び出します

### スクリプトのライフサイクル

あらかじめ定義された次の関数を起点に、処理を記述します

### `InitGame`
アプリの起動時に1回だけ呼ばれるイベント関数です  
ここに初期化処理を記述します

### `UpdateGame`
フレームごとに毎回1度呼び出されるイベント関数です  
ここに描画以外の計算処理を記述します

フレームとは、一定間隔で呼び出される処理の単位です  
初期設定では 1秒間に60回（16ミリ秒間隔） の頻度となっています  
頻度は変更することもできますが、基本的にはディスプレイのリフレッシュレートと揃えます

### `DrawGame`
フレームごとに毎回1度呼び出されるイベント関数です  
ここに描画の処理を記述します

必ず `UpdateGame` よりも後に呼び出されます  
スクリプトの呼び出し順に描画処理が実行されるので、奥に描画したいものから描画命令を記述します

### 座標系について
Webなどでなじみ深い、左上が原点の2次元座標系です（Unity標準やGLスクリーン座標系とは異なります！）  
GameCanvas では、これを『キャンバス座標系』と呼んでいます

`gc.ChangeCanvasSize(720, 1280);` とした場合、  
左上隅は `{ x: 0, y: 0 }` 、右下隅は `{ x: 720, y: 1280 }` です

座標を扱うGameCanvas APIは、基本的にすべてキャンバス座標系で処理を行います

## 今週の課題
講義中に説明します

## よくある質問

### Q. スクリプトを更新したのに、何も変わらない

A. プログラムが間違っていて、コンパイルエラーとなっている可能性が高いです

Unityのコンソールウィンドウのエラー表示を確認するか、コードエディタ上でビルドしてみましょう。コンパイルエラーがあれば、その箇所と理由が表示されます。スペルや構文が正しいかどうか、全角スペースが混じってういないか等、確認してみましょう

### Q. スクリプトには間違いらしきものが見当たらないが、コンパイルエラーが表示される

A. VisualStudio for mac を使っている場合、csproj ファイルが正しく生成されていないかも知れません

一度 VisualStudio を閉じて、Unity 上部メニューの `Assets > Open C# Project` をクリックして、プロジェクトを開きなおしてみてください

---
🔙 [教材トップに戻る](README.md)

©2015-2020 Smart Device Programming.
