スマートデバイスプログラミング 第01回
# イントロダクション
講義概要を説明します。開発環境を構築したら、早速コードを編集します  
（最終更新：2020-10-11）

## Unity開発環境のセットアップ

- 🪟 [Windows10 の方の環境セットアップは こちら](setup/win10.md)
- 🍎 [macOS の方の環境セットアップは こちら](setup/macos.md)

### スクリプトエディターについて
Unity におけるスクリプティングでは、次のIDEが公式でサポートされています

- Visual Studio
- Visual Studio Code
- JetBrains Rider

C# スクリプトの編集は、必ず上記いずれかのIDEを活用してください  
（これら以外のエディターを使ってトラブルが起きても、講義ではサポートしきれません）

IDEについての詳細は、[Unity 統合開発環境 (IDE) サポート](https://docs.unity3d.com/ja/2020.1/Manual/ScriptingToolsIDEs.html) で確認できます

## GameCanvasプロジェクトの導入と実行

1. [GameCanvasのリリースページ](https://github.com/sfc-sdp/GameCanvas-Unity/releases)から、最新の GameCanvas のzipファイルをダウンロードします

1. ダウンロードしたzipを解凍します。できたフォルダーは、好きな場所に移動したりリネームしたりして問題ありません

1. UnityHub を起動し、プロジェクト画面で「リストに追加」ボタンを押します

1. フォルダーの選択ダイアログが出現するので、先ほど解凍したフォルダーを選択します。正しいフォルダーを選択すれば、プロジェクト一覧に追加されます

1. 追加されたプロジェクトをクリックして、開きます

1. プロジェクトが開いたら、画面上部中央のプレビューボタン（▶️）を押すと アプリが実行されます。青い空の画像と文字が出ていれば、導入は無事完了です

## 連打ゲームをつくる

1. プロジェクトウィンドウ（初期設定では、中央下段にあります）にて `Assets/Game.cs` （＃アイコンのファイル）をダブルクリックして開きます

1. コードエディターが起動して `Game.cs` が表示されたら、次のように書き換えます

13行目を、次の2行で上書き
```cs
int time = 600;
int score = 0;
```

22行目（InitGameの `{` と `}` の間）を、次の1行で上書き
```cs
gc.ChangeCanvasSize(360, 640);
```

30～31行目（UpdateGameの `{` と `}` の間）を次の11行で上書き
```cs
time -= 1;

if (time >= 0)
{
    score += gc.PointerBeginCount;
}
if (gc.GetPointerDuration(0) >= 2)
{
    time = 600;
    score = 0;
}
```

48～61行目（DrawGameの `{` と `}` の間）を次の12行で上書き
```cs
gc.ClearScreen();

if (time >= 0)
{
    gc.DrawString("time:" + time, 60, 50);
}
else
{
    gc.DrawString("finished!!", 60, 50);
}

gc.DrawString("score:" + score, 60, 100);
```

3. 書き換え終えたら、保存して Unity の画面に戻り、プレビューボタン（▶️）を押してみましょう

1. 600フレーム（初期設定は秒間60フレームなので、約10秒）で何回タップできたかを競うゲームになっています。画面を2秒長押しすると、スコアとタイムがリセットされ、再度遊べます

## よくある質問

### Q. スクリプトを更新したのに、何も変わらない

A. プログラムが間違っていて、コンパイルエラーとなっている可能性が高いです

Unityのコンソールウィンドウのエラー表示を確認するか、コードエディタ上でビルドしてみましょう。コンパイルエラーがあれば、その箇所と理由が表示されます。ペースト位置が正しいかどうか、全角スペースが混じってういないか等、確認してみましょう

---
🔙 [教材トップに戻る](README.md)

©2015-2020 Smart Device Programming.
